---
title: route_ws2008
description: 了解如何修改和显示本地 IP 路由表中的条目。
ms.custom: na
ms.prod: windows-server
ms.reviewer: na
ms.suite: na
ms.technology: manage-windows-commands
ms.tgt_pltfrm: na
ms.topic: article
ms.assetid: afcd666c-0cef-47c2-9bcc-02d202b983b3
author: coreyp-at-msft
ms.author: coreyp
manager: dongill
ms.date: 07/11/2018
ms.openlocfilehash: cc68dd5634ae4832376924c1678dc10a0427f2b2
ms.sourcegitcommit: 6aff3d88ff22ea141a6ea6572a5ad8dd6321f199
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 09/27/2019
ms.locfileid: "71371420"
---
# <a name="route_ws2008"></a>route_ws2008

>适用于：Windows Server （半年频道），Windows Server 2016，Windows Server 2012 R2，Windows Server 2012

显示和修改本地 IP 路由表中的条目。 使用不带参数的**路由**将显示帮助。   

## <a name="syntax"></a>语法  
```  
route [/f] [/p] [<Command> [<Destination>] [mask <Netmask>] [<Gateway>] [metric <Metric>]] [if <Interface>]]  
```  

### <a name="parameters"></a>Parameters  

|参数|描述|  
|-------|--------|  
|/f|清除所有不是宿主路由的条目的路由表（网络掩码为255.255.255.255 的路由）、环回网络路由（目标为127.0.0.0 的路由和网络掩码）或多播路由（目标为224.0.0.0 的路由和240.0.0.0 的网络掩码。 如果将此与其中一个命令（如添加、更改或删除）结合使用，则在运行该命令之前将清除该表。|  
|/p|与 add 命令一起使用时，会将指定的路由添加到注册表中，并在每次启动 TCP/IP 协议时用于初始化 IP 路由表。 默认情况下，启动 TCP/IP 协议后，不会保留已添加的路由。 与 print 命令一起使用时，将显示持久路由的列表。 对于所有其他命令，将忽略此参数。 持久性路由存储在注册表位置**HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Tcpip\Parameters\PersistentRoutes**中。|  
|\<Command >|指定要运行的命令。 下表列出了有效的命令：<br /><br />@no__t**添加：** 添加路由。<br />-   **更改：** 修改现有路由。<br />@no__t**删除：** 删除路由或路由。<br />@no__t 0**print：** 打印一个或一路由。|  
|\<Destination >|指定路由的网络目标。 目标可以是 IP 网络地址（其中，网络地址的主机位设置为0）、主机路由的 IP 地址，或者使用0.0.0.0 作为默认路由。|  
|mask @no__t >|指定路由的网络目标。 目标可以是 IP 网络地址（其中，网络地址的主机位设置为0）、主机路由的 IP 地址，或者使用0.0.0.0 作为默认路由。|  
|\<Gateway >|指定 "转发" 或 "下一跃点" IP 地址，通过该地址可以访问网络目标和子网掩码定义的地址集。 对于本地附加的子网路由，网关地址为分配给连接到子网的接口的 IP 地址。 对于在一个或多个路由器上可用的远程路由，网关地址是可直接访问的 IP 地址，分配给邻居路由器。|  
|指标 \<Metric >|指定路由的整数开销指标（范围从1到9999），这是在路由表中选择与要转发的数据包的目标地址最匹配的路由表中的多个路由时使用的。 将选择具有最低指标的路由。 此指标可以反映跃点数、路径速度、路径可靠性、路径吞吐量或管理属性。|  
|如果 \<Interface >|指定可在其上访问目标的接口的接口索引。 若要查看接口及其相应接口索引的列表，请使用 "路由打印" 命令的显示。 可以为接口索引使用十进制或十六进制值。 对于十六进制值，请在十六进制数值前面加上0x。 如果省略 if 参数，则从网关地址确定接口。|  
|/?|在命令提示符下显示帮助。|  

## <a name="remarks"></a>备注  
- 路由表的 "**指标**" 列中的大值是允许 tcp/ip 根据每个 LAN 接口的 IP 地址、子网掩码和默认网关的配置，自动确定路由表中的路由指标的结果。 默认情况下，自动确定接口指标，可确定每个接口的速度，并调整每个接口的路由指标，以便最快的接口创建指标最低的路由。 若要删除大指标，请从每个 LAN 连接的 TCP/IP 协议的高级属性中禁用接口跃点的自动确定。  
- 如果在<strong>systemroot\System32\Drivers @ no__t-2</strong>等文件夹中存储的本地网络文件中存在适当的条目，则可以将名称用于*目标*。 名称可用于*网关*，只要可以通过标准主机名解析技术（例如域名系统（DNS）查询）将名称解析为 IP 地址，并使用存储在<strong>systemroot\system32\drivers @ no__t-2 中的本地 Hosts 文件。</strong>etc 文件夹和 NetBIOS 名称解析。  
- 如果命令是**打印**或**删除**，则可以省略*网关*参数，并可以将通配符用于目标和网关。 *目标*值可以是由星号（*）指定的通配符值。 如果指定的目标包含星号（\*）或问号（？），则将其视为通配符，并且仅打印或删除匹配的目标路由。 星号匹配任何字符串，问号匹配任何单个字符。 例如 @no__t，0.1，，192.168. \*、127 \* @no__t 和 3224 @ no__t-4 都是星号通配符的有效使用。  
- 使用无效的目标和子网掩码（网络掩码）值的组合显示 "路由：错误的网关地址网络掩码" 错误消息。 当目标中的一个或多个位设置为1时，如果将相应的子网掩码位设置为0，则会出现此错误消息。 若要测试此条件，请使用二进制表示法表示目标和子网掩码。 二进制表示法中的子网掩码包含一系列1位，表示目标的网络地址部分，后者表示目标的主机地址部分。 检查以确定目标中是否存在为主机地址（由子网掩码定义）的部分设置为1的位。  
- **/P**参数仅支持用于 windows NT 4.0、windows 2000、windows Millennium Edition、windows XP 和 windows Server 2003 的路由命令。 Windows 95 或 Windows 98 的**路由**命令不支持此参数。  
- 仅当 Internet 协议（TCP/IP）协议安装为网络连接中的网络适配器属性中的组件时，此命令才可用。  

## <a name="BKMK_Examples"></a>示例  
若要显示 IP 路由表的全部内容，请键入：  
```  
route print  
```  
若要显示以10开头的 IP 路由表中的路由，请键入：  
```  
route print 10.*  
```  
若要使用默认网关地址192.168.12.1 添加默认路由，请键入：  
```  
route add 0.0.0.0 mask 0.0.0.0 192.168.12.1  
```  
若要将路由添加到目标10.41.0.0，子网掩码为255.255.0.0，下一跃点地址为10.27.0.1，请键入：  
```  
route add 10.41.0.0 mask 255.255.0.0 10.27.0.1  
```  
若要将永久性路由添加到目标10.41.0.0，子网掩码为255.255.0.0，下一跃点地址为10.27.0.1，请键入：  
```  
route /p add 10.41.0.0 mask 255.255.0.0 10.27.0.1  
```  
若要将路由添加到目标10.41.0.0，子网掩码为255.255.0.0，下一跃点地址为10.27.0.1，开销指标为7，请键入：  
```  
route add 10.41.0.0 mask 255.255.0.0 10.27.0.1 metric 7  
```  
若要将路由添加到目标10.41.0.0，子网掩码为255.255.0.0，下一跃点地址为10.27.0.1，并使用接口索引0x3，请键入：  
```  
route add 10.41.0.0 mask 255.255.0.0 10.27.0.1 if 0x3  
```  
若要删除目标为10.41.0.0，子网掩码为255.255.0.0 的路由，请键入：  
```  
route delete 10.41.0.0 mask 255.255.0.0  
```  
若要删除 IP 路由表中以10开头的所有路由，请键入：  
```  
route delete 10.*  
```  
若要将目标为10.41.0.0、子网掩码为255.255.0.0 的路由的下一跃点地址从10.27.0.1 更改为10.27.0.25，请键入：  
```  
route change 10.41.0.0 mask 255.255.0.0 10.27.0.25  
```  

## <a name="additional-references"></a>其他参考  
-   [命令行语法项](command-line-syntax-key.md)  
